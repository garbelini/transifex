{% load i18n %}

{% if members %}
<script type="text/javascript">
  jQuery(document).ready(function() {
    /* handles the 'drawer' effect */
    $('a.user').pjax('#user_profile', {
      timeout: null,
      error: function(xhr, err) {}
    });

    $('a.user').live('click', function() {
      activate_user($(this));
    });
  });
</script>

<div id="members_list">

  <h3 class="header drawer">{% trans "Team members:" %}</h3>

  <ul>
    <li><a href="{{ next_url_clean }}">All</a></li>
    <li><a href="{{ next_url_clean }}?filter=coordinators">Coordinators</a></li>
    <li><a href="{{ next_url_clean }}?filter=reviewers">Reviewers</a></li>
  </ul>

  <ul class="list drawer">
    {% if is_coordinator or is_maintainer %}
      {% for member in members %}
        <li id="{{ member.id }}" class="user">
          <a href="{% url team_members_edit project.slug language.code %}?username={{member.username}}" class="user {% if selected_user.username == member.username %}active{% endif %}">
            {{ member.username }}
            {% if member.first_name or member.last_name %}
              (<span class="fullname">{{ member.get_full_name }}</span>)
            {% endif %}
          </a>
        </li>
      {% endfor %}
    {% else %}
      {% for member in members %}
        <li id="{{ member.id }}" class="user">
          <a href="{% url team_members project.slug language.code %}?username={{member.username}}" class="user {% if selected_user.username == member.username %}active{% endif %}">
            {{ member.username }}
            {% if member.first_name or member.last_name %}
              (<span class="fullname">{{ member.get_full_name }}</span>)
            {% endif %}
          </a>
        </li>
      {% endfor %}
    {% endif %}
  </ul>

</div>

{% endif %}
